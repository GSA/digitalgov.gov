{{/* Collection Component

  Wrapper component around uswds-collection that returns a collection of links built from a list of internal resources or external links.
  Takes in a collection_data object and settings object

  @param {object} collection_data - List of pages or links that have a required header, description, link
  @param {string} collection_data.header - header that can be a link or plain header text
  @param {string} collection_data.summary - description text that follows the header
  @param {string} collection_data.href - link url for internal pages and external sites

  @param {object} settings — Settings to control how the collection list should be displayed
  @param {string} settings.variant — collection list type according to https://designsystem.digital.gov/components/collection/
  - @type default - displays title and description. Used for hugo internal pages
  - @type media - displays agency icon, title and description. Used for hugo internal pages
  - @type headings - display title and meta_source. Used for external links
  - @type custom - displays agency icon, title and description. Used for custom data set in front matter pages like topic/design
  @param {number} settings.limit — number of list items to be displayed, defaults to 10 max
  @param {string} settings.header_title — header title at top of the list
  @param {string} settings.header_size — list item header size ranging from h1-h6
  @param {string} settings.header_link — if present will make the header a link, otherwise just a plain header
  @param {string} settings.header_id — The relative path to the file, for example "v21st-century-idea"
  @param {string} settings.meta_source - The referring source for an external link used with the "headings" variant that reads "Performance.gov".
  - @description - Pass in .Params.source if using a set of resources pages for the collection component, otherwise provide a external link source
  @param {object} settings.footer - an object for setting the footer message
  - @param {string } settings.footer.title - link text that should read "More on ..." with an arrow icon before the text
  - @param {string } settings.footer.href - url for the link

  @example
  {{ $top_resources := .Params.top_resources.resources
}}
{{ $footer := ( dict "title" .Params.top_resources.footer.title "href" .Params.top_resources.footer.href ) }}
{{ $collection_settings := ( dict "variant" "custom" "limit" 10 "list_header" 3 false "footer" $footer ) }}
{{- partial "partials/core/collection/collection.html" (dict "collection_data" $top_resources "settings" $collection_settings) -}}
*/}}
{{ $settings := .settings }}
{{ $collection_data := .collection_data }}
{{ $collection_settings := ( dict "length" (or $settings.limit 10) "variant" $settings.variant "list_header" $settings.list_header "meta_source" $settings.meta_source) }}
{{ $header_data := ( dict "title" $settings.header_title "size" $settings.header_size "link" $settings.header_link "id" $settings.header_id ) }}
{{ $footer := $settings.footer }}

{{ if $collection_data }}
  <div class="dg-collection">
    <div class="grid-row">
      {{ if $settings.header_title }}
        {{ partial "core/collection/collection-header" (dict "data" $header_data) }}
      {{ end }}
      {{ partial "core/usa-collection" (dict "collection_data" $collection_data "settings" $collection_settings) }}
    </div>

    {{ if $footer.title }}
      <div class="dg-collection__footer">
        <p class="dg-collection__more">
          <a href="{{- $footer.href | relURL -}}">
            <span>{{ $footer.title }}</span>
            <svg
              class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
              aria-hidden="true"
              focusable="false"
            >
              <use
                xlink:href="{{ "uswds/img/sprite.svg#arrow_forward" | relURL }}"
              ></use>
            </svg>
          </a>
        </p>
      </div>
    {{ end }}
  </div>
{{ end }}
